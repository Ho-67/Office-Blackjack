name: Deploy to GitHub Pages

on:
  # ç•¶æ¨é€åˆ°é è¨­åˆ†æ”¯ï¼ˆmainï¼‰æ™‚åŸ·è¡Œ
  push:
    branches: [main]

  # å…è¨±å¾ GitHub Actions ä»‹é¢æ‰‹å‹•è§¸ç™¼æ­¤å·¥ä½œæµç¨‹
  workflow_dispatch:

# è¨­å®š GITHUB_TOKEN æ¬Šé™ï¼Œä»¥å…è¨±éƒ¨ç½²åˆ° GitHub Pages
permissions:
  contents: read   # å…è¨±è®€å–å„²å­˜åº«å…§å®¹
  pages: write     # å…è¨±å¯«å…¥ Pages éƒ¨ç½²
  id-token: write  # å…è¨±ä½¿ç”¨ OpenID Connect é€²è¡Œèº«åˆ†é©—è­‰

# åƒ…å…è¨±åŒæ™‚é–“åŸ·è¡Œä¸€å€‹éƒ¨ç½²å·¥ä½œã€‚
# è‹¥åœ¨åŸ·è¡ŒæœŸé–“æœ‰æ–°çš„éƒ¨ç½²æ’å…¥ï¼Œåªæœƒä¿ç•™æœ€æ–°çš„é‚£æ¬¡ï¼Œå…¶ä»–è·³éã€‚
# ä½†ã€Œä¸æœƒã€ä¸­æ–·ç›®å‰é€²è¡Œä¸­çš„éƒ¨ç½²ï¼Œè®“å…¶å®Œæˆã€‚
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # ğŸ”§ å»ºç½®ï¼ˆBuildï¼‰éšæ®µ
  build:
    runs-on: ubuntu-latest  # ä½¿ç”¨æœ€æ–°ç‰ˆ Ubuntu ç’°å¢ƒåŸ·è¡Œ
    steps:
      - name: Checkout
        uses: actions/checkout@v4  # ä¸‹è¼‰ç›®å‰å„²å­˜åº«çš„åŸå§‹ç¢¼

      - name: Setup Pages
        uses: actions/configure-pages@v4  # è¨­å®š GitHub Pages ç›¸é—œç’°å¢ƒ

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3  # ä¸Šå‚³è¦éƒ¨ç½²çš„æª”æ¡ˆï¼ˆæ‰“åŒ…æˆ artifactï¼‰
        with:
          # ä¸Šå‚³æ•´å€‹å°ˆæ¡ˆè³‡æ–™å¤¾
          path: '.'

  # ğŸš€ éƒ¨ç½²ï¼ˆDeployï¼‰éšæ®µ
  deploy:
    environment:
      name: github-pages  # è¨­å®šéƒ¨ç½²ç›®æ¨™ç’°å¢ƒåç¨±
      url: ${{ steps.deployment.outputs.page_url }}  # å–å¾—éƒ¨ç½²å¾Œçš„ç¶²ç«™ URL
    runs-on: ubuntu-latest  # ä½¿ç”¨æœ€æ–°ç‰ˆ Ubuntu ç’°å¢ƒåŸ·è¡Œ
    needs: build  # æ­¤éšæ®µéœ€ç­‰ build éšæ®µå®Œæˆå¾Œæ‰åŸ·è¡Œ
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4  # å°‡å‰›å‰›ä¸Šå‚³çš„ artifact éƒ¨ç½²åˆ° GitHub Pages
